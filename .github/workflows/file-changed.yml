name: Print Changed Files

on:
  pull_request:
    types: [opened]

jobs:
  print_changed_files:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Get list of changed files
      run: |
         echo repository "${{ github.repository }}"
         echo event.number "${{ github.event.number }}"
         echo URL https://api.github.com/repos/${{ github.repository }}/pulls/${{ github.event.number }}/files"
         curl --request GET \
          --url "https://api.github.com/repos/${{ github.repository }}/pulls/${{ github.event.pull_request.number }}/files" \
          --header "Authorization: Bearer ${{ secrets.TOKEN }}" \
          --header "Accept: application/vnd.github+json" | \
          jq -r '.[].filename'

